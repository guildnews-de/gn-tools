(()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(){return-1*(new Date).getTimezoneOffset()/60}function n(e){var t=e.split(":");return 60*+t[0]*60+60*+t[1]}function o(e){var t=parseInt(e/3600)%24,n=parseInt(e/60)%60;return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)}function s(e,t){var o=new Date,s=n(o.getHours()+":"+o.getMinutes()),a=e.lcsec-s+1800,l=t.lcsec-s+1800;return a<0&&(a+=86400),l<0&&(l+=86400),a<l?-1:a>l?1:0}function a(){var e=l("lang")?l("lang"):"en";$(".table-content").remove(),$.getJSON("/assets/tool_timer/wbtime.json",(function(a){for(var l=0,r=0,c=new Array;a.worldboss[l];){for(var u=0;a.worldboss[l].uptime[u];){sec=n(a.worldboss[l].uptime[u]),lsec=sec+3600*t(),lsec>=86400&&(lsec-=86400),lsec<0&&(lsec+=86400);var d=a.worldboss[l].name[e]?a.worldboss[l].name[e]:a.worldboss[l].name.en,m=a.worldboss[l].map[e]?a.worldboss[l].map[e]:a.worldboss[l].map.en;c[r++]={id:a.worldboss[l].id,name:d,map:m,uptime:a.worldboss[l].uptime[u],upsec:sec,lctime:o(lsec),lcsec:lsec,scale:a.worldboss[l].scale,waypoint:a.worldboss[l].waypoint},u++}l++}for(c.sort(s),l=0;l<r;l++){var p=i(c[l].id)?" done":"",f='<tr class="table-content scale-'+c[l].scale+" "+c[l].id+'"><td class="wbframe'+p+'"><span class="wbid" hidden>'+c[l].id+"</span>"+c[l].name+'<span class="wbmap">'+(c[l].map?" - "+c[l].map:"")+'</span></td><td class="localtime">'+c[l].lctime+'</td><td class="utctime">'+c[l].uptime+'</td><td class="waypoint">'+c[l].waypoint+"</td></tr>";$("#table-worldboss").append(f)}}))}function l(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var s=n[o].trim();if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}function r(e,t,n){document.cookie=e+"="+t+"; expires="+n+";"}function i(e){var t=l("wbdone").split("/");return $.inArray(e,t)>-1}function c(t){$.getJSON("assets/tool_timer/lang.json",(function(n){for(var o in n[t])if("lang-name"!=o){var s=n[t][o];"object"===e(n[t][o])&&(s=n[t][o].join("")),$("#"+o).html(s)}}))}Array.prototype.clean=function(e){for(var t=0;t<this.length;t++)this[t]==e&&(this.splice(t,1),t--);return this},$(document).ready((function(){var e,n,o,s;$("#nowtimezone").append(" ("+(e=t(),n=parseInt(e),o=60*(e-Math.floor(e)),s="UTC",(s+=(e>=0?"+":"")+n)+(0==o?"":":"+o)+")")),c(l("lang")||"en"),a(),setInterval((function(){$("#nowtime").html(function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)}()),0==(new Date).getSeconds()&&a()}),1e3),$("#lang-select").change((function(){c($("#lang-select option:selected").val());var e=new Date,t=new Date;t.setFullYear(e.getFullYear()+10),r("lang",$("#lang-select option:selected").val(),t),a()})),$(document).on("click",".waypoint:not(:has(input))",(function(){var e=this,t=$("<input class='chatlink' type='text' size=12 value='"+$(e).text()+"' readonly>");$(e).html(t),t.one("focusout",(function(){$(e).html($(this).val())})).focus().select()})),$(document).on("click",".wbframe",(function(){var e=$(this).children("span.wbid").html();!function(e){var t=l("wbdone").split("/"),n=$.inArray(e,t);n>-1?t.splice(n,1):t.push(e),t.clean(""),e=t.join("/");var o=new Date,s=new Date;s.setUTCFullYear(o.getUTCFullYear()),s.setUTCMonth(o.getUTCMonth()),s.setUTCDate(o.getUTCDate()+1),s.setUTCHours(0),s.setUTCMinutes(0),s.setUTCSeconds(0),r("wbdone",e,s.toUTCString())}(e),$("."+e+">.wbframe").toggleClass("done")})),$(document).on("mouseenter",".table-content",(function(){$("."+$(this).children(".wbframe").children(".wbid").html()).addClass("row-highlight")})),$(document).on("mouseleave",".table-content",(function(){$("."+$(this).children(".wbframe").children(".wbid").html()).removeClass("row-highlight")}))}))})();